{% extends "site_base.html" %}

{% block head_title %}{{ settlement.name }}{% endblock %}

{% block body_class %}settlement{% endblock %}

{% block body %}
    
    <p><a href="{% url player_detail settlement.player.pk %}">{{ settlement.player }}</a></p>
    
    <h1>{{ settlement.kind|title }} of {{ settlement.name }}</h1>
    
    <p><b>Location</b>: {{ settlement.continent.name }} {{ settlement.x }}-{{ settlement.y }}</p>
    
    <h2>Resources</h2>
    
    {% if settlement.resource_counts.all %}
        <ul>
            {% for resource_count in settlement.resource_counts.all %}
                <li>{{ resource_count.kind.name }} = {{ resource_count.current }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No resources in this settlement.</p>
    {% endif %}
    
    <h2>Buildings</h2>
    
    {% if settlement.buildings.all %}
        <ul>
            {% for building in settlement.buildings.all %}
                <li>
                    <a href="{% url building_detail building.pk %}">{{ building.kind.name }}</a>
                    {{ building.x }}-{{ building.y }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No buildings in this settlement.</p>
    {% endif %}
    
    <h2>Build Queue</h2>
    
    {% if settlement.build_queue.all %}
        <ul>
            {% for building in settlement.build_queue.all %}
                <li>
                    <a href="{% url building_detail building.pk %}">{{ building.kind.name }}</a>
                    {{ building.x }}-{{ building.y }}
                    <br />
                    finishing in {{ building.construction_end|timeuntil }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No buildings in the build queue for this settlement.</p>
    {% endif %}
    
    <p><a href="{% url building_create settlement.pk %}">Create a building</a></p>
    
{% endblock %}
